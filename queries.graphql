# SPDX-FileCopyrightText: 2023 Magenta ApS <https://magenta.dk>
# SPDX-License-Identifier: MPL-2.0
query GetEngagement($engagement_uuid: UUID!, $email_user_keys: [String!]) {
  engagements(filter: {uuids: [$engagement_uuid]}) {
    objects {
      current {
        validity {
          from
          to
        }
        extension_2
        extension_3
        is_primary
        job_function {
          name
          user_key
          uuid
        }
        primary {
          name
          user_key
          uuid
        }
        person {
          uuid
          addresses(filter: {address_type_user_keys: $email_user_keys}) {
            name
            user_key
            address_type {
              scope
              user_key
              name
            }
          }
        }
      }
      uuid
    }
  }
}

mutation UpdateExtensionField($uuid: UUID!, $from_date: DateTime!, $to_date: DateTime, $extension_3: String) {
  engagement_update(
    input: {uuid: $uuid, validity: {from: $from_date, to: $to_date}, extension_3: $extension_3}
  ) {
    uuid
  }
}
